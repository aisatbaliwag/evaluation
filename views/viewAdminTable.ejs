<%- include('partials/header') %>
    <div class="seniorHigh">
        <div>
            <form action="/back" method="POST">
                <button id="adminTableViewBtn">Back</button>
            </form>
            <table id="admin-table">
                <tr>
                    <!-- Instructor -->
                    <th colspan="21" style="font-size:30px;"><%= teacherCode[0].tValue %></th>
                </tr>
                <tr>
                    <th colspan="6">1. TEACHING COMPETENCE</th>
                    <th colspan="4">2. MANAGEMENT SKILLS</th>
                    <th colspan="4">3. GUIDANCE SKILLS</th>
                    <th colspan="6">4. PERSONAL AND SOCIAL QUALITIES</th>
                    <th rowspan="2">Comments</th>
                </tr>
                <!-- Criteria -->
                <tr>
                    <td class="teaching-cell">1.1 Analyzes and elaborates lesson without reading the textbook in class.</td>
                    <td class="teaching-cell">1.2 Uses audio-visual aid and devices to support and facilitate instruction.</td>
                    <td class="teaching-cell">1.3 Presents facts and concepts clearly and convincingly from related fields and integrate subject matter with actual experience and day-to-day activities.</td>
                    <td class="teaching-cell">1.4 Makes the students apply concepts to demonstrate understanding of the lesson.</td>
                    <td class="teaching-cell">1.5 Gives fair test and examination and return test results within reasonable period.</td>
                    <td class="teaching-cell">1.6 Shows good command of the language of instruction.</td>
                    <td class="management-cell">2.1 Maintains a responsive, safe, and disciplined classroom atmosphere that is conducive to learning.</td>
                    <td class="management-cell">2.2 Follows systematic schedule of classes and school activities.</td>
                    <td class="management-cell">2.3 Stimulates student's respect and regards for the teacher.</td>
                    <td class="management-cell">2.4 Allow students to express their opinions and their views. </td>
                    <td class="guidance-cell">3.1 Accept students as they are by recognizing their strenghts and weakness as individuals.</td>
                    <td class="guidance-cell">3.2 Inspire the students to be self-reliant and self-disciplined.</td>
                    <td class="guidance-cell">3.3 Handles class and students' problems with fairness and understanding.</td>
                    <td class="guidance-cell">3.4 Shows genuine concern for the personal and other problem presented by the students outside the classroom activities.</td>
                    <td class="personal-cell">4.1  Maintains emotional balance; not over-critical or over sensitive.</td>
                    <td class="personal-cell">4.2 Is free from mannerisms that distracts the teaching and learning process.</td>
                    <td class="personal-cell">4.3 Is well groomed; clothes clean and neat. (Use of appropriate clothes becoming a teacher)</td>
                    <td class="personal-cell">4.4 Is fair and impartial to all students. Shows no favoritism.</td>
                    <td class="personal-cell">4.5 Has good sense of humor and shows enthusiasm in teaching.</td>
                    <td class="personal-cell">4.6 Has good diction, clear and modulated voice.</td>
                </tr>
                <!-- Scores -->
                <%
            let totalEntries = 0;
            let sumQ1 = 0, sumQ2 = 0, sumQ3 = 0, sumQ4 = 0, sumQ5 = 0, sumQ6 = 0,
                sumQ7 = 0, sumQ8 = 0, sumQ9 = 0, sumQ10 = 0,
                sumQ11 = 0, sumQ12 = 0, sumQ13 = 0, sumQ14 = 0,
                sumQ15 = 0, sumQ16 = 0, sumQ17 = 0, sumQ18 = 0, sumQ19 = 0, sumQ20 = 0;
                %>

                <% dataList.forEach(data => {

                    if (data.teacher === teacherCode[0].tValue ) {
                        totalEntries++;

                        sumQ1 += data.Q1;
                          sumQ2 += data.Q2;
                        sumQ3 += data.Q3;
                        sumQ4 += data.Q4;
                        sumQ5 += data.Q5;
                        sumQ6 += data.Q6;
                        sumQ7 += data.Q7;
                        sumQ8 += data.Q8;
                        sumQ9 += data.Q9;
                        sumQ10 += data.Q10;
                        sumQ11 += data.Q11;
                        sumQ12 += data.Q12;
                        sumQ13 += data.Q13;
                        sumQ14 += data.Q14;
                        sumQ15 += data.Q15;
                        sumQ16 += data.Q16;
                        sumQ17 += data.Q17;
                        sumQ18 += data.Q18;
                        sumQ19 += data.Q19;
                        sumQ20 += data.Q20;
                %>
                    <tr>
                        <!-- 1. TEACHING COMPETENCE -->
                        <td><%= data.Q1 %></td>
                        <td><%= data.Q2 %></td>
                        <td><%= data.Q3 %></td>
                        <td><%= data.Q4 %></td>
                        <td><%= data.Q5 %></td>
                        <td><%= data.Q6 %></td>
                        <!-- 2. MANAGEMENT SKILLS -->
                        <td><%= data.Q7 %></td>
                        <td><%= data.Q8 %></td>
                        <td><%= data.Q9 %></td>
                        <td><%= data.Q10 %></td>
                        <!-- 3. GUIDANCE SKILLS -->
                        <td><%= data.Q11 %></td>
                        <td><%= data.Q12 %></td>
                        <td><%= data.Q13 %></td>
                        <td><%= data.Q14 %></td>
                        <!-- 4. PERSONAL AND SOCIAL QUALITIES -->
                        <td><%= data.Q15 %></td>
                        <td><%= data.Q16 %></td>
                        <td><%= data.Q17 %></td>
                        <td><%= data.Q18 %></td>
                        <td><%= data.Q19 %></td>
                        <td><%= data.Q20 %></td>
                        <!-- COMMENTS -->
                        <td><%= data.comment %></td>
                    </tr>

                    <!-- COMPUTING AVERAGE PER CELL -->
                    <% }
                    }); %>

                    <%
                        const averageQ1 = totalEntries > 0 ? sumQ1 / totalEntries : 0;
                        const averageQ2 = totalEntries > 0 ? sumQ2 / totalEntries : 0;
                        const averageQ3 = totalEntries > 0 ? sumQ3 / totalEntries : 0;
                        const averageQ4 = totalEntries > 0 ? sumQ4 / totalEntries : 0;
                        const averageQ5 = totalEntries > 0 ? sumQ5 / totalEntries : 0;
                        const averageQ6 = totalEntries > 0 ? sumQ6 / totalEntries : 0;
                        const averageQ7 = totalEntries > 0 ? sumQ7 / totalEntries : 0;
                        const averageQ8 = totalEntries > 0 ? sumQ8 / totalEntries : 0;
                        const averageQ9 = totalEntries > 0 ? sumQ9 / totalEntries : 0;
                        const averageQ10 = totalEntries > 0 ? sumQ10 / totalEntries : 0;
                        const averageQ11 = totalEntries > 0 ? sumQ11 / totalEntries : 0;
                        const averageQ12 = totalEntries > 0 ? sumQ12 / totalEntries : 0;
                        const averageQ13 = totalEntries > 0 ? sumQ13 / totalEntries : 0;
                        const averageQ14 = totalEntries > 0 ? sumQ14 / totalEntries : 0;
                        const averageQ15 = totalEntries > 0 ? sumQ15 / totalEntries : 0;
                        const averageQ16 = totalEntries > 0 ? sumQ16 / totalEntries : 0;
                        const averageQ17 = totalEntries > 0 ? sumQ17 / totalEntries : 0;
                        const averageQ18 = totalEntries > 0 ? sumQ18 / totalEntries : 0;
                        const averageQ19 = totalEntries > 0 ? sumQ19 / totalEntries : 0;
                        const averageQ20 = totalEntries > 0 ? sumQ20 / totalEntries : 0;
                        
                                            %>
                <tr style="font-weight: 600;">
                    <td><%= averageQ1.toFixed(2) %></td>
                    <td><%= averageQ2.toFixed(2) %></td>
                    <td><%= averageQ3.toFixed(2) %></td>
                    <td><%= averageQ4.toFixed(2) %></td>
                    <td><%= averageQ5.toFixed(2) %></td>
                    <td><%= averageQ6.toFixed(2) %></td>
                    <td><%= averageQ7.toFixed(2) %></td>
                    <td><%= averageQ8.toFixed(2) %></td>
                    <td><%= averageQ9.toFixed(2) %></td>
                    <td><%= averageQ10.toFixed(2) %></td>
                    <td><%= averageQ11.toFixed(2) %></td>
                    <td><%= averageQ12.toFixed(2) %></td>
                    <td><%= averageQ13.toFixed(2) %></td>
                    <td><%= averageQ14.toFixed(2) %></td>
                    <td><%= averageQ15.toFixed(2) %></td>
                    <td><%= averageQ16.toFixed(2) %></td>
                    <td><%= averageQ17.toFixed(2) %></td>
                    <td><%= averageQ18.toFixed(2) %></td>
                    <td><%= averageQ19.toFixed(2) %></td>
                    <td><%= averageQ20.toFixed(2) %></td>
                </tr>
                <!-- AVERAGE PER SECTION -->
                <%
                let teachingAverage = averageQ1 + averageQ2 + averageQ3 + averageQ4 + averageQ5 + averageQ6;
                let managementAverage = averageQ7 + averageQ8 + averageQ9 + averageQ10;
                let guidanceAverage = averageQ11 + averageQ12 + averageQ13 + averageQ14;
                let personalAverage = averageQ15 + averageQ16 + averageQ17 + averageQ18 + averageQ19 + averageQ20;
                %>
                <tr style="font-weight: 600;">
                    <td colspan="6" class="teaching-cell"><%= (teachingAverage / 6).toFixed(2) %></td>
                    <td colspan="4" class="management-cell"><%= (managementAverage / 4).toFixed(2) %></td>
                    <td colspan="4" class="guidance-cell"><%= (guidanceAverage / 4).toFixed(2) %></td>
                    <td colspan="6" class="personal-cell"><%= (personalAverage / 6).toFixed(2) %></td>
                </tr>
                <!-- TOTAL AVERAGE -->
                <%
                let totalAverage = (teachingAverage + managementAverage + guidanceAverage + personalAverage) / 20;
                %>
                <tr>
                    <td colspan="20" style="background-color: yellow; font-weight: 600"><%= (totalAverage).toFixed(2) %></td>
                </tr>
            </table>
        </div>
    </div>
    <%- include('partials/footer') %>